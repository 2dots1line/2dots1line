/* Mobile Chat View - Surgical CSS approach */

.mobileChatContainer {
  /* Remove all glassmorphic container styling from the main container */
  background: transparent !important;
  backdrop-filter: none !important;
  border: none !important;
  box-shadow: none !important;
}

/* Target ONLY the main GlassmorphicPanel container (the big background panel) */
/* We need to be very specific to avoid affecting message bubbles and input area */
.mobileChatContainer > :global(.glass-panel.rounded-xl) {
  background: transparent !important;
  backdrop-filter: none !important;
  border: none !important;
  box-shadow: none !important;
}

/* Ensure message bubbles keep their glassmorphic styling */
.mobileChatContainer :global(.space-y-4 .glass-panel),
.mobileChatContainer :global(.max-w-\[70\%\] .glass-panel) {
  background-color: rgba(var(--sys-color-glass-background-rgb), 0.25) !important;
  backdrop-filter: blur(12px) !important;
  -webkit-backdrop-filter: blur(12px) !important;
  border: 1px solid rgba(var(--sys-color-glass-border-rgb), 0.2) !important;
}

/* Ensure input area keeps its glassmorphic styling - but allow dynamic opacity */
.mobileChatContainer :global(.border-t.border-white\/20 .glass-panel),
.mobileChatContainer :global(.flex.flex-col.gap-3.glass-panel) {
  background-color: rgba(var(--sys-color-glass-background-rgb), 0.25);
  backdrop-filter: blur(12px);
  -webkit-backdrop-filter: blur(12px);
  border: 1px solid rgba(var(--sys-color-glass-border-rgb), 0.2);
  /* Allow the panel to become transparent when needed */
  transition: opacity 300ms ease-in-out;
}

/* Remove header completely (Layer 3) */
.mobileChatContainer :global(.flex.items-center.justify-between) {
  display: none !important;
}

/* Remove the border from input area since we're removing the main container */
.mobileChatContainer :global(.border-t.border-white\/20) {
  border: none !important;
}

/* Ensure messages area uses full height */
.mobileChatContainer :global(.flex-1.overflow-y-auto) {
  padding-top: 0 !important;
  padding-bottom: 0 !important;
}

/* Hide scrollbar for cleaner look */
.mobileChatContainer :global(.custom-scrollbar) {
  scrollbar-width: none !important;
  -ms-overflow-style: none !important;
}

.mobileChatContainer :global(.custom-scrollbar::-webkit-scrollbar) {
  display: none !important;
}

/* Remove instruction text at bottom to save space */
.mobileChatContainer :global(.text-xs.text-white\/40) {
  display: none !important;
}

/* Ensure full height usage with safe area support */
.mobileChatContainer :global(.h-\[85vh\]),
.mobileChatContainer :global(.h-\[70vh\]) {
  height: calc(100vh - env(safe-area-inset-bottom, 0px)) !important;
  max-height: calc(100vh - env(safe-area-inset-bottom, 0px)) !important;
}

/* Remove any remaining margins/padding from messages area */
.mobileChatContainer :global(.space-y-4) {
  margin: 0 !important;
  padding: 0 !important;
}

/* Make sure messages start from top */
.mobileChatContainer :global(.pt-4) {
  padding-top: 0 !important;
}

/* Move input area up slightly to avoid HUD overlap - removed since we use mobile component padding */
/* .mobileChatContainer :global(.pb-20) {
  padding-bottom: 20px !important; 
} */

/* Target the input area specifically - ensure it stays within viewport */
.mobileChatContainer :global(.border-t.border-white\/20) {
  border: none !important;
  /* Position input area to stay within visible viewport */
  position: sticky !important;
  bottom: 0 !important;
  z-index: 10 !important;
  /* Add safe area padding for devices with home indicators */
  padding-bottom: calc(24px + env(safe-area-inset-bottom, 0px)) !important;
  /* Add padding between input and bottom of screen */
  margin-bottom: 8px !important;
  /* Ensure input area is always visible */
  background: transparent !important;
  /* Smooth transition for opacity changes */
  transition: opacity 300ms ease-in-out !important;
}

/* Ensure input buttons are visible and not overlapping */
.mobileChatContainer :global(.flex.gap-2.items-center) {
  /* Input buttons styling handled by mobile component padding */
  display: flex;
}

/* Allow agent messages to use more width on mobile */
.mobileChatContainer :global(.justify-start .max-w-\[70\%\]) {
  max-width: 85% !important; /* Allow agent messages to use 90% width instead of 70% */
}

/* Ensure user messages still stay compact on the right */
.mobileChatContainer :global(.justify-end .max-w-\[70\%\]) {
  max-width: 70% !important; /* Keep user messages at 70% for balance */
}

/* Ensure the wider agent messages still have proper glassmorphic styling */
.mobileChatContainer :global(.justify-start .max-w-\[70\%\] .glass-panel) {
  background-color: rgba(var(--sys-color-glass-background-rgb), 0.25) !important;
  backdrop-filter: blur(12px) !important;
  -webkit-backdrop-filter: blur(12px) !important;
  border: 1px solid rgba(var(--sys-color-glass-border-rgb), 0.2) !important;
}